name: CI/CD Pipeline

on:
  push:
    branches: [ dev, main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install dependencies
      run: npm install
    
    - name: Run tests
      run: npm test
    
    - name: Tests passed
      run: echo "âœ… All tests passed!"

#   deploy:
#     needs: test
#     runs-on: ubuntu-latest
#     if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v3
    
#     - name: Deploy to Render
#       run: |
#         echo "ðŸš€ Deploying to Render..."
#         echo "Branch: ${{ github.ref }}"
#         echo "Commit: ${{ github.sha }}"
#         # Render auto-deploys when you push to main
#         # Or you can trigger a deploy hook here
#         curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK }}" || echo "No deploy hook configured yet"
    
#     - name: Deployment complete
#       run: echo "âœ… Deployment triggered successfully!"